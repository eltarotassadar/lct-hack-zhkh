# Что нужно для запуска проекта?
1. Node.js
2. Python + poetry

# Как запустить проект?

1. Сначала надо запулить из гитхаба. Потом перейти в корень проекта, а потом ввести эти команды
2. В терминале:
3. npm i
4. npm run dev
5. Открыть вторую вкладку терминала
6. cd backend (см. более подробный [README по бекенду](./backend/README.md))
7. `poetry install`
8. `fastapi dev main.py`

# Возможности сервиса HydroPulse Insight
- интерактивный выбор водорайона на карте с возможностью вручную выделить интересующую территорию;
- переключение отчетного года с мгновенной перестройкой прогноза риска;
- преднастроенные кластеры водной инфраструктуры Москвы для быстрой навигации;
- каталог узлов учета с множественным выбором — диспетчер видит только нужные точки контроля;
- автоматическая загрузка погодных и почвенных факторов (Open-Meteo API), которые учитываются в прогнозной модели расхождений показаний ГВС;
- интерактивный график телеметрии с читаемыми легендами и единой цветовой схемой;
- таблица риска с подсветкой, описанием порогов и подсказками по действиям.

## Демонстрация работы
- Аналитическая панель «HydroPulse Insight»: выбор района, отображение телеметрии и прогнозов риска (демо-ролик готовится).
- Каталог узлов учета с фильтрацией и выбором нескольких объектов (демо-ролик готовится).


### **Mosvodokanal — прогноз отклонений показаний ГВС**

---

#### **Постановка задачи**
Цель решения — прогнозировать вероятное расхождение показаний узлов учета горячего водоснабжения между ИТП и МКД. Мы комбинируем телеметрию и климатические факторы, чтобы оперативно выделять зоны повышенного риска и выдавать рекомендацию диспетчеру Mosvodokanal.

---

#### **Методы построения фичей**
Для формирования признаков мы проанализировали исторические ведомости учета и климатические параметры:

1. **Объединение телеметрии**:
   - Нормализуем показания ИТП и ОДПУ, выравниваем их по времени и вычисляем относительное отклонение.
   - Дополняем данные метаданными об узле (тип узла, принадлежность к району, режим работы).

2. **Метеорологические факторы**:
   - Из Open-Meteo подгружаем показатели осадков, температуры воздуха и грунта, влажность и облачность.
   - Агрегируем почасовые значения до суточных профилей, которые далее используются в модели прогноза.

3. **Индикаторы эксплуатационного режима**:
   - Формируем признаки сезонности, длительных отклонений и аномалий, которые помогают выделить потенциальные утечки или некорректную работу узлов.

---

#### **Baseline**
1. **Работа по его построению**:
   - Для первичного прототипа использован CatBoostRegressor, обученный на историческом отклонении показаний и погодных данных.
   - Кластеризация узлов учета позволяет подбирать аномалии по типу инфраструктуры.
   - В ноутбуках `train.ipynb` и `weather.ipynb` описаны подготовка выборки и эксперименты с моделями.

---
#### **Методы анализа**
1. **Модель прогнозирования**:
   - Используем CatBoostRegressor, так как он устойчив к пропускам и хорошо работает с табличными признаками.
   - Дополнительно исследуем вероятностные оценки для построения рекомендаций (приоритет реагирования, характер проверки).

2. **Метрики оценки**:
   - Основная метрика — среднеквадратическая ошибка между фактическим и прогнозным отклонением.
   - Дополнительно контролируем коэффициент детерминации \( R^2 \) и точность попадания в допустимый коридор (до 10%).

---

#### **Итог**
Мы создали интерфейс и бэкенд, позволяющие диспетчеру Mosvodokanal:

- контролировать состояние горячего водоснабжения по районам и узлам;
- получать ранние предупреждения об отклонении показаний выше допустимого порога;
- анализировать влияние климатических факторов на работу инфраструктуры;
- формировать набор узлов для приоритезации выездов и профилактических работ.

Текущая версия модели описана в ноутбуках, а UI адаптирован под сценарий оперативного мониторинга и принятия решений.
